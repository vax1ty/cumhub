-- Main Library Table
local VisualUILib = {}

local HttpService = game:GetService("HttpService")
local Players = game:GetService("Players")

local ConfigF = "YourConfigFolder"  -- Replace with the folder name you want to use for saving
local player = Players.LocalPlayer

local function saveConfig(config, name)
	local json = HttpService:JSONEncode(config)
	writefile(ConfigF..'/'..name..'.json', json)
	print('Saved Config: Successfully saved your config with the name, \''..name..'.json\'.')
end

local function loadConfig(name)
	local success, result = pcall(function()
		local json = readfile(ConfigF..'/'..name..'.json')
		return HttpService:JSONDecode(json)
	end)
	if success then
		return result
	else
		warn("Failed to load config: " .. result)
		return {}
	end
end

-- Function to create a new window
function VisualUILib:CreateWindow(title, configName)
	local window = {}
	window.config = loadConfig(configName)
	window.elements = {}

	-- Instances
	local ScreenGui = Instance.new("ScreenGui")
	local MainFrame = Instance.new("Frame")
	local UICorner = Instance.new("UICorner")
	local TitleLabel = Instance.new("TextLabel")
	local Sidebar = Instance.new("Frame")
	local UIListLayoutSidebar = Instance.new("UIListLayout")
	local ContentFrame = Instance.new("ScrollingFrame")
	local UIPadding = Instance.new("UIPadding")
	local UIListLayout = Instance.new("UIListLayout")

	-- Properties
	ScreenGui.Parent = player:WaitForChild("PlayerGui")
	ScreenGui.ResetOnSpawn = false

	MainFrame.Parent = ScreenGui
	MainFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
	MainFrame.Position = UDim2.new(0.5, -300, 0.5, -200)
	MainFrame.Size = UDim2.new(0, 600, 0, 400)
	MainFrame.ClipsDescendants = true

	UICorner.CornerRadius = UDim.new(0, 15)
	UICorner.Parent = MainFrame

	TitleLabel.Parent = MainFrame
	TitleLabel.BackgroundTransparency = 1.000
	TitleLabel.Position = UDim2.new(0.5, -50, 0, 10)
	TitleLabel.Size = UDim2.new(0, 100, 0, 40)
	TitleLabel.Font = Enum.Font.GothamBold
	TitleLabel.Text = title
	TitleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
	TitleLabel.TextSize = 28.000
	TitleLabel.TextXAlignment = Enum.TextXAlignment.Center

	Sidebar.Parent = MainFrame
	Sidebar.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
	Sidebar.Position = UDim2.new(0, 10, 0, 60)
	Sidebar.Size = UDim2.new(0, 140, 1, -70)

	local sidebarCorner = Instance.new("UICorner")
	sidebarCorner.CornerRadius = UDim.new(0, 10)
	sidebarCorner.Parent = Sidebar

	UIListLayoutSidebar.Parent = Sidebar
	UIListLayoutSidebar.SortOrder = Enum.SortOrder.LayoutOrder
	UIListLayoutSidebar.Padding = UDim.new(0, 10)

	ContentFrame.Parent = MainFrame
	ContentFrame.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
	ContentFrame.Position = UDim2.new(0, 160, 0, 60)
	ContentFrame.Size = UDim2.new(1, -170, 1, -70)
	ContentFrame.CanvasSize = UDim2.new(0, 0, 2, 0)
	ContentFrame.ScrollBarThickness = 8
	ContentFrame.AutomaticCanvasSize = Enum.AutomaticSize.Y
	ContentFrame.ClipsDescendants = true

	UIPadding.Parent = ContentFrame
	UIPadding.PaddingBottom = UDim.new(0, 10)
	UIPadding.PaddingLeft = UDim.new(0, 10)
	UIPadding.PaddingRight = UDim.new(0, 10)
	UIPadding.PaddingTop = UDim.new(0, 10)

	UIListLayout.Parent = ContentFrame
	UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder
	UIListLayout.Padding = UDim.new(0, 10)

	-- Method to add a tab button to the sidebar
	function window:AddTab(text, contentFunction)
		local TabButton = Instance.new("TextButton")
		local UICornerSidebar = Instance.new("UICorner")

		TabButton.Parent = Sidebar
		TabButton.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
		TabButton.Size = UDim2.new(1, 0, 0, 40)
		TabButton.Font = Enum.Font.GothamBold
		TabButton.Text = text
		TabButton.TextColor3 = Color3.fromRGB(255, 255, 255)
		TabButton.TextSize = 18.000
		TabButton.AutoButtonColor = true

		UICornerSidebar.CornerRadius = UDim.new(0, 10)
		UICornerSidebar.Parent = TabButton

		TabButton.MouseEnter:Connect(function()
			TabButton.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
		end)

		TabButton.MouseLeave:Connect(function()
			TabButton.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
		end)

		TabButton.MouseButton1Click:Connect(function()
			-- Clear the current content
			for _, child in pairs(ContentFrame:GetChildren()) do
				if child:IsA("Frame") or child:IsA("TextButton") then
					child:Destroy()
				end
			end
			-- Load the content for the selected tab
			contentFunction()
		end)
	end

	-- Method to add a button to the window
	function window:AddButton(text, callback)
		-- Implementation here
	end

	-- Method to add a toggle to the window
	function window:AddToggle(text, default, callback)
		-- Implementation here
	end

	-- Method to add a slider to the window
	function window:AddSlider(text, min, max, default, callback)
		-- Implementation here
	end

	-- Method to add a dropdown to the window
	function window:AddDropdown(text, items, callback)
		-- Implementation here
	end

	-- Method to add a notification
	function window:AddNotification(text, duration)
		-- Implementation here
	end

	return window
end

return VisualUILib
